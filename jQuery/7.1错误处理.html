<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>错误处理</title>
</head>
<script src="jquery-3.2.1.js"></script>
<body>
<script>
    $(function(){
        /*
        * try ... catch ... finally

         使用try ... catch ... finally处理错误时，我们编写的代码如下：
        * */
        var r1, r2, s = null;
        try {
            r1 = s.length; // 此处应产生错误
            r2 = 100; // 该语句不会执行
        } catch (e) {
            alert('出错了：' + e);
        } finally {
            console.log('finally');
        }
        console.log('r1 = ' + r1); // r1应为undefined
        console.log('r2 = ' + r2); // r2应为undefined

        /*
        * 错误类型

         JavaScript有一个标准的Error对象表示错误，
         还有从Error派生的TypeError、ReferenceError等错误对象。
         我们在处理错误时，可以通过catch(e)捕获的变量e访问错误对象：
        * */


        /*
        * 抛出错误

         程序也可以主动抛出一个错误，让执行流程直接跳转到catch块。抛出错误使用throw语句。

         例如，下面的代码让用户输入一个数字，程序接收到的实际上是一个字符串
         ，然后用parseInt()转换为整数。当用户输入不合法的时候，我们就抛出错误：
        * */

        var r, n, s;
        try {
            s = prompt('请输入一个数字');
            n = parseInt(s);
            if (isNaN(n)) {
                throw new Error('输入错误');
            }
            // 计算平方:
            r = n * n;
            alert(n + ' * ' + n + ' = ' + r);
        } catch (e) {
            alert('出错了：' + e);
        }


    });
</script>
</body>
</html>